# ğŸš€ HÆ¯á»šNG DáºªN LUá»’NG HOáº T Äá»˜NG CODE - DÃ€NH CHO DEVELOPER

## ğŸ“‹ Tá»”NG QUAN

TÃ i liá»‡u nÃ y giáº£i thÃ­ch chi tiáº¿t **luá»“ng hoáº¡t Ä‘á»™ng cá»§a code** trong há»‡ thá»‘ng Quáº£n lÃ½ Danh báº¡ ThÃ´ng minh, giÃºp cÃ¡c developer má»›i hiá»ƒu rÃµ cÃ¡ch code hoáº¡t Ä‘á»™ng vÃ  dá»… dÃ ng maintain/extend há»‡ thá»‘ng.

## ğŸ—ï¸ KIáº¾N TRÃšC Tá»”NG THá»‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MAIN APPLICATION                        â”‚
â”‚                     (main.cpp)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESENTATION LAYER                      â”‚
â”‚                    (ContactUI.cpp)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BUSINESS LOGIC LAYER                   â”‚
â”‚                   (ContactManager.cpp)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATA STRUCTURES LAYER                    â”‚
â”‚              (BinarySearchTree.h, RedBlackTree.h)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ENTITY LAYER                          â”‚
â”‚                      (Contact.cpp)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ LUá»’NG HOáº T Äá»˜NG CHI TIáº¾T

### **1. ğŸš€ KHá»I Äá»˜NG á»¨NG Dá»¤NG (STARTUP FLOW)**

#### **ğŸ“ File: `main.cpp`**
```cpp
int main() {
    try {
        ContactUI ui;        // ğŸ—ï¸ Táº¡o UI instance
        ui.run();            // ğŸš€ Cháº¡y á»©ng dá»¥ng
    } catch (const std::exception& e) {
        // ğŸ›¡ï¸ Global exception handling
        std::cerr << "Fatal error: " << e.what() << std::endl;
        return 1;
    }
    return 0;
}
```

#### **ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng:**
1. **Khá»Ÿi táº¡o ContactUI**: Táº¡o instance cá»§a ContactUI
2. **Gá»i ui.run()**: Báº¯t Ä‘áº§u vÃ²ng láº·p chÃ­nh cá»§a á»©ng dá»¥ng
3. **Exception handling**: Xá»­ lÃ½ lá»—i toÃ n cá»¥c náº¿u cÃ³

---

### **2. ğŸ–¥ï¸ VÃ’NG Láº¶P CHÃNH Cá»¦A á»¨NG Dá»¤NG (MAIN LOOP)**

#### **ğŸ“ File: `ContactUI.cpp` - Method `run()`**
```cpp
void ContactUI::run() {
    showWelcome();           // ğŸ‰ Hiá»ƒn thá»‹ mÃ n hÃ¬nh chÃ o
    
    while (true) {           // ğŸ”„ VÃ²ng láº·p vÃ´ háº¡n
        try {
            showMainMenu();   // ğŸ“‹ Hiá»ƒn thá»‹ menu chÃ­nh
            int choice = getIntInput("Chá»n chá»©c nÄƒng: ");
            
            switch (choice) { // ğŸ¯ Xá»­ lÃ½ lá»±a chá»n
                case 1: addContact(); break;      // â• ThÃªm liÃªn há»‡
                case 2: manageContact(); break;   // âœï¸ Quáº£n lÃ½ liÃªn há»‡
                case 3: searchContacts(); break;  // ğŸ” TÃ¬m kiáº¿m
                case 4: displayAllContacts(); break; // ğŸ“‹ Hiá»ƒn thá»‹ táº¥t cáº£
                case 5: showStatistics(); break;  // ğŸ“Š Thá»‘ng kÃª
                case 6: 
                    showGoodbye();                // ğŸ‘‹ Táº¡m biá»‡t
                    return;                       // ğŸšª ThoÃ¡t
                default: 
                    cout << "Lá»±a chá»n khÃ´ng há»£p lá»‡!" << endl;
            }
        } catch (const ContactException& e) {
            cout << "Lá»—i: " << e.what() << endl;
        }
    }
}
```

#### **ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng:**
1. **Hiá»ƒn thá»‹ welcome**: ChÃ o má»«ng ngÆ°á»i dÃ¹ng
2. **VÃ²ng láº·p chÃ­nh**: Láº·p vÃ´ háº¡n cho Ä‘áº¿n khi thoÃ¡t
3. **Hiá»ƒn thá»‹ menu**: Menu vá»›i 6 lá»±a chá»n chÃ­nh
4. **Xá»­ lÃ½ input**: Nháº­n vÃ  validate lá»±a chá»n
5. **Switch case**: Äiá»u hÆ°á»›ng Ä‘áº¿n chá»©c nÄƒng tÆ°Æ¡ng á»©ng
6. **Exception handling**: Xá»­ lÃ½ lá»—i trong má»—i iteration

---

### **3. â• LUá»’NG THÃŠM LIÃŠN Há»† Má»šI (ADD CONTACT FLOW)**

#### **ğŸ“ File: `ContactUI.cpp` - Method `addContact()`**
```cpp
void ContactUI::addContact() const {
    cout << "\n=== THÃŠM LIÃŠN Há»† Má»šI ===" << endl;
    
    // ğŸ” BÆ°á»›c 1: Nháº­p vÃ  validate tÃªn
    string name = getStringInput("Nháº­p tÃªn liÃªn há»‡: ");
    if (name.empty() || name.length() < 2) {
        cout << "âŒ TÃªn pháº£i cÃ³ Ã­t nháº¥t 2 kÃ½ tá»±!" << endl;
        return;
    }
    
    // ğŸ­ BÆ°á»›c 2: Táº¡o liÃªn há»‡ thÃ´ng qua ContactManager
    ContactManager* manager = ContactManager::getInstance();
    if (!manager->addContact(name)) {
        cout << "âŒ KhÃ´ng thá»ƒ thÃªm liÃªn há»‡!" << endl;
        return;
    }
    
    // ğŸ¯ BÆ°á»›c 3: Hiá»ƒn thá»‹ menu thÃªm chi tiáº¿t
    showAddDetailsMenu(name);
}
```

#### **ğŸ“ File: `ContactManager.cpp` - Method `addContact()`**
```cpp
bool ContactManager::addContact(const string& name) {
    try {
        // ğŸ›¡ï¸ Validation 1: Kiá»ƒm tra tÃªn rá»—ng
        if (name.empty()) {
            throw EmptyInput("tÃªn");
        }
        
        // ğŸ” Validation 2: Kiá»ƒm tra trÃ¹ng láº·p
        if (contactsByName.contains(name)) {
            throw ContactAlreadyExists(name);
        }
        
        // ğŸ­ BÆ°á»›c 3: Táº¡o Contact object má»›i
        Contact* newContact = new Contact(name);
        
        // ğŸ”„ BÆ°á»›c 4: ThÃªm vÃ o táº¥t cáº£ indexes
        addToIndexes(newContact);
        
        cout << "âœ… LiÃªn há»‡ '" << name << "' Ä‘Ã£ Ä‘Æ°á»£c thÃªm thÃ nh cÃ´ng!" << endl;
        return true;
        
    } catch (const ContactException& e) {
        cout << "âŒ Lá»—i: " << e.what() << endl;
        return false;
    }
}
```

#### **ğŸ“ File: `ContactManager.cpp` - Method `addToIndexes()`**
```cpp
void ContactManager::addToIndexes(Contact* contact) {
    // ğŸŒ³ BÆ°á»›c 1: ThÃªm vÃ o BST theo tÃªn
    contactsByName.insert(contact->getName(), contact);
    
    // ğŸŒ³ BÆ°á»›c 2: ThÃªm vÃ o BST theo ID
    contactsById.insert(contact->getId(), contact);
    
    // ğŸ”´ BÆ°á»›c 3: ThÃªm vÃ o RBT theo sá»‘ Ä‘iá»‡n thoáº¡i (náº¿u cÃ³)
    if (!contact->getPhoneNumber().empty()) {
        if (!isPhoneNumberDuplicate(contact->getPhoneNumber(), contact)) {
            contactsByPhone.insert(contact->getPhoneNumber(), contact);
        }
    }
    
    // ğŸ”´ BÆ°á»›c 4: ThÃªm vÃ o RBT theo email (náº¿u cÃ³)
    if (!contact->getEmail().empty()) {
        if (!isEmailDuplicate(contact->getEmail(), contact)) {
            contactsByEmail.insert(contact->getEmail(), contact);
        }
    }
}
```

#### **ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng chi tiáº¿t:**
1. **Input validation**: Kiá»ƒm tra tÃªn khÃ´ng rá»—ng vÃ  Ä‘á»§ Ä‘á»™ dÃ i
2. **Duplicate check**: Kiá»ƒm tra tÃªn khÃ´ng trÃ¹ng láº·p
3. **Object creation**: Táº¡o Contact object má»›i vá»›i ID tá»± Ä‘á»™ng
4. **Index synchronization**: ThÃªm vÃ o táº¥t cáº£ relevant indexes
5. **Success feedback**: ThÃ´ng bÃ¡o thÃ nh cÃ´ng cho user

---

### **4. ğŸ” LUá»’NG TÃŒM KIáº¾M LIÃŠN Há»† (SEARCH FLOW)**

#### **ğŸ“ File: `ContactUI.cpp` - Method `searchContacts()`**
```cpp
void ContactUI::searchContacts() const {
    cout << "\n=== TÃŒM KIáº¾M LIÃŠN Há»† ===" << endl;
    cout << "1. TÃ¬m theo tÃªn" << endl;
    cout << "2. TÃ¬m theo sá»‘ Ä‘iá»‡n thoáº¡i" << endl;
    cout << "3. TÃ¬m theo email" << endl;
    
    int choice = getIntInput("Chá»n loáº¡i tÃ¬m kiáº¿m: ");
    
    switch (choice) {
        case 1: searchByName(); break;      // ğŸ” TÃ¬m theo tÃªn
        case 2: searchByPhone(); break;     // ğŸ“± TÃ¬m theo sá»‘ Ä‘iá»‡n thoáº¡i
        case 3: searchByEmail(); break;     // ğŸ“§ TÃ¬m theo email
        default: cout << "Lá»±a chá»n khÃ´ng há»£p lá»‡!" << endl;
    }
}
```

#### **ğŸ“ File: `ContactManager.cpp` - Method `searchByName()`**
```cpp
set<Contact*> ContactManager::searchByName(const string& name) {
    set<Contact*> results;  // ğŸ—‚ï¸ Container chá»©a káº¿t quáº£
    
    // ğŸ”„ BÆ°á»›c 1: Convert input sang lowercase
    string lowerName = name;
    transform(lowerName.begin(), lowerName.end(), lowerName.begin(), ::tolower);
    
    // ğŸ­ BÆ°á»›c 2: Äá»‹nh nghÄ©a search strategy
    auto searchCallback = [&results, &lowerName](const string& key, Contact* contact) {
        string contactName = key;
        string lowerContactName = contactName;
        transform(lowerContactName.begin(), lowerContactName.end(), lowerContactName.begin(), ::tolower);
        
        // ğŸ” Kiá»ƒm tra partial match
        if (lowerContactName.find(lowerName) != string::npos) {
            results.insert(contact);
        }
    };
    
    // ğŸ­ BÆ°á»›c 3: Äá»‹nh nghÄ©a match function
    auto matchFunc = [](const string& partial, const string& full) {
        string lowerPartial = partial;
        string lowerFull = full;
        transform(lowerPartial.begin(), lowerPartial.end(), lowerPartial.begin(), ::tolower);
        transform(lowerFull.begin(), lowerFull.end(), lowerFull.begin(), ::tolower);
        return lowerFull.find(lowerPartial) != string::npos;
    };
    
    // ğŸš€ BÆ°á»›c 4: Thá»±c hiá»‡n tÃ¬m kiáº¿m vá»›i callback
    contactsByName.searchPartial(name, matchFunc, searchCallback);
    
    return results;
}
```

#### **ğŸ“ File: `BinarySearchTree.h` - Method `searchPartial()`**
```cpp
void searchPartial(const K& partialKey, 
                  const std::function<bool(const K&, const K&)>& matchFunc,
                  const std::function<void(const K&, const V&)>& callback) const {
    searchPartialCallback(root, partialKey, matchFunc, callback);
}

void searchPartialCallback(Node* node, const K& partialKey, 
                          const std::function<bool(const K&, const K&)>& matchFunc,
                          const std::function<void(const K&, const V&)>& callback) const {
    if (node == nullptr) return;
    
    // ğŸ” BÆ°á»›c 1: Kiá»ƒm tra node hiá»‡n táº¡i
    if (matchFunc(partialKey, node->key)) {
        callback(node->key, node->value);  // ğŸ¯ Gá»i callback náº¿u match
    }
    
    // ğŸ”„ BÆ°á»›c 2: Äá»‡ quy xuá»‘ng cáº£ 2 subtree
    searchPartialCallback(node->left, partialKey, matchFunc, callback);
    searchPartialCallback(node->right, partialKey, matchFunc, callback);
}
```

#### **ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng chi tiáº¿t:**
1. **Menu selection**: User chá»n loáº¡i tÃ¬m kiáº¿m
2. **Input collection**: Nháº­n tá»« khÃ³a tÃ¬m kiáº¿m
3. **Strategy definition**: Äá»‹nh nghÄ©a match function vÃ  callback
4. **Tree traversal**: Duyá»‡t toÃ n bá»™ tree Ä‘á»ƒ tÃ¬m matches
5. **Result collection**: Thu tháº­p káº¿t quáº£ vÃ o set
6. **Display results**: Hiá»ƒn thá»‹ káº¿t quáº£ cho user

---

### **5. âœï¸ LUá»’NG CHá»ˆNH Sá»¬A LIÃŠN Há»† (EDIT FLOW)**

#### **ğŸ“ File: `ContactUI.cpp` - Method `editContact()`**
```cpp
void ContactUI::editContact() const {
    cout << "\n=== CHá»ˆNH Sá»¬A LIÃŠN Há»† ===" << endl;
    
    // ğŸ” BÆ°á»›c 1: TÃ¬m liÃªn há»‡ cáº§n sá»­a
    string name = getStringInput("Nháº­p tÃªn liÃªn há»‡ cáº§n sá»­a: ");
    ContactManager* manager = ContactManager::getInstance();
    Contact* contact = manager->findContact(name);
    
    if (!contact) {
        cout << "âŒ KhÃ´ng tÃ¬m tháº¥y liÃªn há»‡!" << endl;
        return;
    }
    
    // ğŸ“‹ BÆ°á»›c 2: Hiá»ƒn thá»‹ thÃ´ng tin hiá»‡n táº¡i
    contact->display();
    
    // ğŸ¯ BÆ°á»›c 3: Hiá»ƒn thá»‹ menu chá»‰nh sá»­a
    showEditMenu(contact);
}
```

#### **ğŸ“ File: `ContactUI.cpp` - Method `showEditMenu()`**
```cpp
void ContactUI::showEditMenu(Contact* contact) const {
    while (true) {
        cout << "\n=== MENU CHá»ˆNH Sá»¬A ===" << endl;
        cout << "1. Sá»­a sá»‘ Ä‘iá»‡n thoáº¡i" << endl;
        cout << "2. Sá»­a email" << endl;
        cout << "3. Sá»­a Ä‘á»‹a chá»‰" << endl;
        cout << "4. Sá»­a ghi chÃº" << endl;
        cout << "5. Quay láº¡i" << endl;
        
        int choice = getIntInput("Chá»n thÃ´ng tin cáº§n sá»­a: ");
        
        switch (choice) {
            case 1: editPhoneNumber(contact); break;  // ğŸ“± Sá»­a sá»‘ Ä‘iá»‡n thoáº¡i
            case 2: editEmail(contact); break;        // ğŸ“§ Sá»­a email
            case 3: editAddress(contact); break;      // ğŸ  Sá»­a Ä‘á»‹a chá»‰
            case 4: editNotes(contact); break;        // ğŸ“ Sá»­a ghi chÃº
            case 5: return;                           // ğŸ”™ Quay láº¡i
            default: cout << "Lá»±a chá»n khÃ´ng há»£p lá»‡!" << endl;
        }
    }
}
```

#### **ğŸ“ File: `ContactUI.cpp` - Method `editPhoneNumber()`**
```cpp
void ContactUI::editPhoneNumber(Contact* contact) const {
    string oldPhone = contact->getPhoneNumber();
    string newPhone = getStringInput("Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i má»›i: ");
    
    // ğŸ›¡ï¸ BÆ°á»›c 1: Validation
    if (!isValidPhoneNumber(newPhone)) {
        cout << "âŒ Sá»‘ Ä‘iá»‡n thoáº¡i khÃ´ng há»£p lá»‡!" << endl;
        return;
    }
    
    // ğŸ” BÆ°á»›c 2: Kiá»ƒm tra trÃ¹ng láº·p
    ContactManager* manager = ContactManager::getInstance();
    if (!manager->canAddPhoneNumber(newPhone, contact)) {
        cout << "âŒ Sá»‘ Ä‘iá»‡n thoáº¡i Ä‘Ã£ tá»“n táº¡i!" << endl;
        return;
    }
    
    // ğŸ”„ BÆ°á»›c 3: Cáº­p nháº­t indexes
    manager->updatePhoneIndex(contact, oldPhone, newPhone);
    
    // âœï¸ BÆ°á»›c 4: Cáº­p nháº­t contact
    contact->setPhoneNumber(newPhone);
    
    cout << "âœ… Sá»‘ Ä‘iá»‡n thoáº¡i Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t!" << endl;
}
```

#### **ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng chi tiáº¿t:**
1. **Contact lookup**: TÃ¬m liÃªn há»‡ cáº§n sá»­a theo tÃªn
2. **Current display**: Hiá»ƒn thá»‹ thÃ´ng tin hiá»‡n táº¡i
3. **Edit menu**: Menu vá»›i cÃ¡c tÃ¹y chá»n chá»‰nh sá»­a
4. **Input validation**: Kiá»ƒm tra dá»¯ liá»‡u má»›i há»£p lá»‡
5. **Duplicate check**: Kiá»ƒm tra khÃ´ng trÃ¹ng láº·p
6. **Index update**: Cáº­p nháº­t táº¥t cáº£ relevant indexes
7. **Contact update**: Cáº­p nháº­t thÃ´ng tin trong Contact object

---

### **6. ğŸ—‘ï¸ LUá»’NG XÃ“A LIÃŠN Há»† (DELETE FLOW)**

#### **ğŸ“ File: `ContactManager.cpp` - Method `removeContact()`**
```cpp
bool ContactManager::removeContact(const string& name) {
    try {
        // ğŸ” BÆ°á»›c 1: TÃ¬m liÃªn há»‡ cáº§n xÃ³a
        Contact** contactPtr = contactsByName.find(name);
        if (contactPtr == nullptr) {
            throw ContactNotFound(name);
        }
        
        Contact* contact = *contactPtr;
        int id = contact->getId();
        
        // ğŸ”„ BÆ°á»›c 2: XÃ³a khá»i táº¥t cáº£ indexes
        removeFromIndexes(contact);
        
        // ğŸ—‘ï¸ BÆ°á»›c 3: Delete Contact object
        delete contact;
        
        cout << "âœ… LiÃªn há»‡ '" << name << "' Ä‘Ã£ Ä‘Æ°á»£c xÃ³a thÃ nh cÃ´ng!" << endl;
        return true;
        
    } catch (const ContactException& e) {
        cout << "âŒ Lá»—i: " << e.what() << endl;
        return false;
    }
}
```

#### **ğŸ“ File: `ContactManager.cpp` - Method `removeFromIndexes()`**
```cpp
void ContactManager::removeFromIndexes(Contact* contact) {
    // ğŸŒ³ BÆ°á»›c 1: XÃ³a khá»i BST theo tÃªn
    contactsByName.remove(contact->getName());
    
    // ğŸŒ³ BÆ°á»›c 2: XÃ³a khá»i BST theo ID
    contactsById.remove(contact->getId());
    
    // ğŸ”´ BÆ°á»›c 3: XÃ³a khá»i RBT theo sá»‘ Ä‘iá»‡n thoáº¡i (náº¿u cÃ³)
    if (!contact->getPhoneNumber().empty()) {
        contactsByPhone.remove(contact->getPhoneNumber());
    }
    
    // ğŸ”´ BÆ°á»›c 4: XÃ³a khá»i RBT theo email (náº¿u cÃ³)
    if (!contact->getEmail().empty()) {
        contactsByEmail.remove(contact->getEmail());
    }
}
```

#### **ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng chi tiáº¿t:**
1. **Contact lookup**: TÃ¬m liÃªn há»‡ cáº§n xÃ³a theo tÃªn
2. **Index removal**: XÃ³a khá»i táº¥t cáº£ indexes
3. **Memory cleanup**: Delete Contact object
4. **Success feedback**: ThÃ´ng bÃ¡o thÃ nh cÃ´ng

---

### **7. ğŸ§¹ LUá»’NG Dá»ŒN Dáº¸P Bá»˜ NHá»š (CLEANUP FLOW)**

#### **ğŸ“ File: `ContactManager.cpp` - Method `clearAll()`**
```cpp
void ContactManager::clearAll() {
    // ğŸ”¥ NEW: Sá»­ dá»¥ng callback Ä‘á»ƒ delete contacts thay vÃ¬ dÃ¹ng vector
    auto deleteCallback = [](const int& key, Contact* contact) {
        delete contact;  // ğŸ—‘ï¸ Delete tá»«ng contact
    };
    
    // ğŸ”„ BÆ°á»›c 1: Delete táº¥t cáº£ Contact objects
    contactsById.forEach(deleteCallback);
    
    // ğŸ§¹ BÆ°á»›c 2: Clear táº¥t cáº£ indexes
    contactsByName.clear();
    contactsByPhone.clear();
    contactsByEmail.clear();
    contactsById.clear();
}
```

#### **ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng chi tiáº¿t:**
1. **Callback definition**: Äá»‹nh nghÄ©a delete callback function
2. **Contact deletion**: Delete táº¥t cáº£ Contact objects
3. **Index clearing**: Clear táº¥t cáº£ tree structures
4. **Memory cleanup**: Giáº£i phÃ³ng bá»™ nhá»›

---

## ğŸ” CÃC ÄIá»‚M QUAN TRá»ŒNG Cáº¦N HIá»‚U

### **1. ğŸ­ Singleton Pattern Implementation**
```cpp
// ğŸ“ Vá»‹ trÃ­: ContactManager.cpp:11-17
ContactManager* ContactManager::instance = nullptr;

ContactManager* ContactManager::getInstance() {
    if (instance == nullptr) {
        instance = new ContactManager();  // ğŸ­ Lazy initialization
    }
    return instance;
}
```

**LÆ°u Ã½ quan trá»ng:**
- **Lazy initialization**: Instance chá»‰ Ä‘Æ°á»£c táº¡o khi cáº§n thiáº¿t
- **Global access**: CÃ³ thá»ƒ truy cáº­p tá»« má»i nÆ¡i trong á»©ng dá»¥ng
- **Single instance**: Äáº£m báº£o chá»‰ cÃ³ má»™t instance duy nháº¥t

### **2. ğŸ­ Callback Pattern vá»›i std::function**
```cpp
// ğŸ“ Vá»‹ trÃ­: BinarySearchTree.h:132-142
void searchPartial(const K& partialKey, 
                  const std::function<bool(const K&, const K&)>& matchFunc,      // ğŸ­ Strategy 1
                  const std::function<void(const K&, const V&)>& callback) const { // ğŸ­ Strategy 2
    searchPartialCallback(root, partialKey, matchFunc, callback);
}
```

**LÆ°u Ã½ quan trá»ng:**
- **std::function**: CÃ³ thá»ƒ chá»©a báº¥t ká»³ callable object nÃ o
- **Lambda support**: Há»— trá»£ lambda functions vá»›i captures
- **Strategy pattern**: Cho phÃ©p thay Ä‘á»•i algorithm trong runtime

### **3. ğŸ”„ Index Synchronization**
```cpp
// ğŸ“ Vá»‹ trÃ­: ContactManager.cpp:280-300
void ContactManager::addToIndexes(Contact* contact) {
    contactsByName.insert(contact->getName(), contact);      // ğŸŒ³ BST insert
    contactsById.insert(contact->getId(), contact);          // ğŸŒ³ BST insert
    
    if (!contact->getPhoneNumber().empty()) {
        if (!isPhoneNumberDuplicate(contact->getPhoneNumber(), contact)) {
            contactsByPhone.insert(contact->getPhoneNumber(), contact);  // ğŸ”´ RBT insert
        }
    }
    
    if (!contact->getEmail().empty()) {
        if (!isEmailDuplicate(contact->getEmail(), contact)) {
            contactsByEmail.insert(contact->getEmail(), contact);        // ğŸ”´ RBT insert
        }
    }
}
```

**LÆ°u Ã½ quan trá»ng:**
- **Multiple indexes**: Má»—i index Ä‘Æ°á»£c tá»‘i Æ°u cho má»™t loáº¡i tÃ¬m kiáº¿m
- **Duplicate prevention**: Kiá»ƒm tra trÃ¹ng láº·p trÆ°á»›c khi insert
- **Consistent state**: Äáº£m báº£o táº¥t cáº£ indexes Ä‘á»“ng bá»™

---

## ğŸš€ CÃCH DEBUG VÃ€ TROUBLESHOOTING

### **1. ğŸ” Debug Search Operations**
```cpp
// ThÃªm debug output vÃ o searchByName
set<Contact*> ContactManager::searchByName(const string& name) {
    set<Contact*> results;
    
    cout << "ğŸ” Debug: Searching for name: " << name << endl;
    cout << "ğŸ” Debug: Total contacts: " << contactsByName.size() << endl;
    
    // ... existing code ...
    
    cout << "ğŸ” Debug: Found " << results.size() << " results" << endl;
    return results;
}
```

### **2. ğŸ” Debug Index Synchronization**
```cpp
// ThÃªm debug output vÃ o addToIndexes
void ContactManager::addToIndexes(Contact* contact) {
    cout << "ğŸ”„ Debug: Adding contact to indexes" << endl;
    cout << "ğŸ”„ Debug: Contact name: " << contact->getName() << endl;
    cout << "ğŸ”„ Debug: Contact ID: " << contact->getId() << endl;
    
    // ... existing code ...
    
    cout << "ğŸ”„ Debug: Index sizes after add:" << endl;
    cout << "  - Names: " << contactsByName.size() << endl;
    cout << "  - IDs: " << contactsById.size() << endl;
    cout << "  - Phones: " << contactsByPhone.size() << endl;
    cout << "  - Emails: " << contactsByEmail.size() << endl;
}
```

### **3. ğŸ” Debug Memory Issues**
```cpp
// ThÃªm debug output vÃ o destructor
ContactManager::~ContactManager() {
    cout << "ğŸ§¹ Debug: ContactManager destructor called" << endl;
    cout << "ğŸ§¹ Debug: Total contacts before cleanup: " << contactsByName.size() << endl;
    
    clearAll();
    
    cout << "ğŸ§¹ Debug: Cleanup completed" << endl;
}
```

---

## ğŸ“š BEST PRACTICES CHO DEVELOPER

### **1. ğŸ”§ Code Organization**
- **Single Responsibility**: Má»—i method chá»‰ lÃ m má»™t viá»‡c
- **Clear Naming**: TÃªn method vÃ  variable rÃµ rÃ ng, dá»… hiá»ƒu
- **Consistent Formatting**: Format code nháº¥t quÃ¡n

### **2. ğŸ›¡ï¸ Error Handling**
- **Try-catch blocks**: LuÃ´n wrap code trong try-catch
- **Specific exceptions**: Sá»­ dá»¥ng exception types cá»¥ thá»ƒ
- **User-friendly messages**: ThÃ´ng bÃ¡o lá»—i thÃ¢n thiá»‡n vá»›i user

### **3. ğŸš€ Performance Optimization**
- **Early return**: Return sá»›m náº¿u cÃ³ thá»ƒ
- **Efficient algorithms**: Sá»­ dá»¥ng algorithms hiá»‡u quáº£
- **Memory management**: Quáº£n lÃ½ bá»™ nhá»› cáº©n tháº­n

### **4. ğŸ§ª Testing**
- **Unit tests**: Viáº¿t test cho tá»«ng method
- **Integration tests**: Test interaction giá»¯a cÃ¡c components
- **Edge cases**: Test cÃ¡c trÆ°á»ng há»£p Ä‘áº·c biá»‡t

---

## ğŸ”® HÆ¯á»šNG PHÃT TRIá»‚N TÆ¯Æ NG LAI

### **1. ğŸ—„ï¸ Database Integration**
- **SQLite**: Local database cho persistence
- **Connection pooling**: Quáº£n lÃ½ database connections
- **Transaction support**: ACID properties

### **2. ğŸŒ Web Interface**
- **REST API**: RESTful API endpoints
- **Web UI**: HTML/CSS/JavaScript interface
- **Real-time updates**: WebSocket cho real-time

### **3. ğŸ” Security Features**
- **Data encryption**: MÃ£ hÃ³a dá»¯ liá»‡u nháº¡y cáº£m
- **User authentication**: Há»‡ thá»‘ng xÃ¡c thá»±c user
- **Access control**: PhÃ¢n quyá»n truy cáº­p

### **4. ğŸ“Š Advanced Features**
- **Full-text search**: TÃ¬m kiáº¿m nÃ¢ng cao
- **Data analytics**: PhÃ¢n tÃ­ch dá»¯ liá»‡u
- **Export/Import**: Xuáº¥t/nháº­p dá»¯ liá»‡u

---

## ğŸ“ Káº¾T LUáº¬N

TÃ i liá»‡u nÃ y cung cáº¥p cÃ¡i nhÃ¬n toÃ n diá»‡n vá» luá»“ng hoáº¡t Ä‘á»™ng cá»§a code trong há»‡ thá»‘ng Quáº£n lÃ½ Danh báº¡ ThÃ´ng minh. Hiá»ƒu rÃµ cÃ¡c luá»“ng nÃ y sáº½ giÃºp developer:

1. **ğŸ” Debug hiá»‡u quáº£**: Biáº¿t chÃ­nh xÃ¡c code cháº¡y nhÆ° tháº¿ nÃ o
2. **ğŸ”§ Maintain dá»… dÃ ng**: Hiá»ƒu rÃµ dependencies vÃ  relationships
3. **ğŸš€ Extend nhanh chÃ³ng**: Biáº¿t nÆ¡i nÃ o Ä‘á»ƒ thÃªm tÃ­nh nÄƒng má»›i
4. **ğŸ§ª Test chÃ­nh xÃ¡c**: Test Ä‘Ãºng cÃ¡c scenarios quan trá»ng

**LÆ°u Ã½ quan trá»ng:**
- **Callback pattern**: Hiá»ƒu rÃµ cÃ¡ch std::function hoáº¡t Ä‘á»™ng
- **Index synchronization**: Äáº£m báº£o táº¥t cáº£ indexes luÃ´n Ä‘á»“ng bá»™
- **Exception handling**: Xá»­ lÃ½ lá»—i má»™t cÃ¡ch graceful
- **Memory management**: Quáº£n lÃ½ bá»™ nhá»› cáº©n tháº­n

HÃ£y sá»­ dá»¥ng tÃ i liá»‡u nÃ y nhÆ° má»™t roadmap Ä‘á»ƒ navigate qua codebase vÃ  hiá»ƒu rÃµ cÃ¡ch há»‡ thá»‘ng hoáº¡t Ä‘á»™ng! ğŸ¯
